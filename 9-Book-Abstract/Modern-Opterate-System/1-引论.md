- 《现代操作系统》读摘

# 引论

- 计算机有两种运行方式：
  - `内核态`：能够执行计算机的所有机器指令
  - `用户态`：只能够执行计算机的部分机器指令（不影响计算机运行且在权限内）
- `多路复用`：
  - `时间上复用`：不同的程序排队轮流使用CPU
  - `空间上复用`：每个运行时程序使用内存的一部分空间
- 处理器
  - 每个CPU中都有一定数量的寄存器：
    - 通用寄存器
    - 专用寄存器
    - 程序寄存器
    - 程序状态寄存器（Program Status Word）PSW
  - 现代处理早已放弃同时读取、解码、执行一条指令的简单模型，而是采用流水线式：`取指单元 ==> 解码单元 ==> 执行单元`。比流水线更先进的设计是`超标量CPU`
  - 系统调用：`TRAP指令`把用户态切换到内核态
- 多线程和多核芯片
  - 多线程或`超线程`
- 存储器
  - 主存被分割为`高速缓存行`
  - `高速缓存命中`：当某个程序需要读取一个或一些存储字时，高速缓存硬件检查所需要访问的高速缓存行是否在高速缓存中，若在则称为高速缓存命中
  - `CMOS存储器`：保持当前时间和日期
  - `虚拟内存机制`：使用时计算机时的内存大于计算机实际的物理内存
  - `存储器管理单元 MMU`：每个CPU中都有
  - `上下文切换`：从一个程序切换到另一个程序有时可称为此
- `I/O设备`：
  - 设备驱动程序
  - 热插拔设备
    - `热启动`：计算机操作系统执行此操作不需要关机
    - `冷启动`：计算机的开机操作就是
  - 实现输入输出的方式：
    - `忙等待`：缺点就是要占据CPU，CPU一直轮询等待对应的I/O操作完成
    - `中断`：CPU执行某个程序遇到I/O等待时，转去执行另外一个程序，当此程序I/O结束时给CPU发送一个中断通知I/O操作完成
    - `直接存储器访问 DMA`
- 总线
  - `PCIe`总线
  - `共享总线架构`：表示多个设备使用一些相同的导线传输数据
  - `串行总线架构`：通过一条被称为数据通路的链路传递集合了所有位的一条消息，非常像网络包
  - `USB`是慢速I/O设备
  - `SCSI总线`是高速总线
- 启动计算机
  - `基本输入输出系统`（Basic Input Output System，`BIOS`）
- 操作系统概念
  - 进程
    - `进程`：与此相关的是`地址空间`：存放有可执行程序、程序的数据以及程序的栈
    - `进程表`：是数组（或链表）结构
    - 某个进程能够创建一个或者多个进程（称为`子进程`），可以得到`进程树`
    - `进程间通信`
  - 地址空间
    - 操作系统所创建的地址空间和计算机中的物理地址不是同一个，该地址空间与机器的物理内存`解耦`
  - 文件
    - `目录`：路径名
    - `根目录`：`/`
    - 每个进程都有一个`工作目录`
    - 在读取文件前，首先要打开文件，检查其访问权限，若权限许可，系统将返回一个小整数，称做`文件描述符`
    - `特殊文件`：
      - `块特殊文件`
      - `字符特殊文件`
    - `管道 pipe`是一种虚文件，可以连接两个进程
- 系统调用
  - `TRAP指令`
  - `进程标识符 PID`
  - UNIX中进程将其存储空间划分为三段：`正文段`、`数据段`、`堆栈段`
    - `[堆栈] ==增长==> [空闲区] <==增长== [数据] [正文]`

***

个人总结：Linux系统的核心就在`进程管理`和`文件管理`
